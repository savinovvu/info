**Null safety** в Kotlin — это система, которая предотвращает возникновение `NullPointerException` (NPE) на этапе компиляции. Она основана на разделении типов на **нулевые** (`Nullable`) и **ненулевые** (`Non-null`). Например:
- `String` — ненулевой тип (не может хранить `null`).
- `String?` — нулевой тип (может хранить `null`).

### Основные механизмы:
---

#### 1. Безопасные вызовы (`?.`)
Позволяют безопасно обращаться к свойствам или методам объекта, который может быть `null`. Если объект равен `null`, вызов игнорируется, и результат будет `null`.
```kotlin
val length: Int? = text?.length // Если text == null, то length = null
```

#### 2. Оператор Элвиса (`?:`)
Предоставляет значение по умолчанию, если выражение слева равно `null`.
```kotlin
val length: Int = text?.length ?: 0 // Если text?.length == null, то length = 0
```
Также используется для возврата или выброса исключения:
```kotlin
val data = input ?: throw IllegalArgumentException("Input is null")
```

#### 3. Ненулевое утверждение (`!!`)
Преобразует любое значение в ненулевой тип. Если значение равно `null`, выбрасывает `NullPointerException`.
```kotlin
val length: Int = text!!.length // Если text == null, возникнет NPE
```
**Важно:** Используйте `!!` только когда уверены, что значение не `null`. В серверном Kotlin это часто необходимо при взаимодействии с внешними API или базой данных, где данные могут быть непредсказуемыми.

---

### Дополнительные возможности:
- **Smart Cast** — компилятор автоматически преобразует тип, если проверка на `null` выполнена ранее:
  ```kotlin
  if (text != null) {
      val length = text.length // text автоматически становится String
  }
  ```
- **Безопасное приведение типов** (`as?`):
  ```kotlin
  val value = data as? String // Если приведение невозможно, value = null
  ```

### Пример для серверного Kotlin:
```kotlin
// Данные из запроса могут быть null
val queryParam: String? = request.getParameter("id")

// Безопасное извлечение значения с обработкой по умолчанию
val id: Int = queryParam?.toIntOrNull() ?: 0

// Использование !! если данные критичны и должны быть проверены ранее
val criticalId: Int = requireNotNull(queryParam) { "ID must not be null" }.toInt()
```

### Итог:
- **`?.`** и **`?:`** помогают избежать NPE, предоставляя безопасные альтернативы.
- **`!!`** — это явный обход null safety, используемый только в крайних случаях.
- **Smart Cast** и **безопасные приведения** упрощают код без ущерба для безопасности.

В серверной разработке эти инструменты особенно полезны для работы с данными извне (запросы, БД), где `null` встречается часто.