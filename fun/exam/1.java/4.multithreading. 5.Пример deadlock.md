Вот пример deadlock (взаимной блокировки) на Java, где два потока блокируют друг друга, ожидая ресурсы:

```java
public class DeadlockExample {
    private static final Object resource1 = new Object();
    private static final Object resource2 = new Object();

    public static void main(String[] args) {
        Thread thread1 = new Thread(() -> {
            synchronized (resource1) {
                System.out.println("Поток 1: Заблокирован resource1");

                try { Thread.sleep(100); } 
                catch (InterruptedException e) {}

                synchronized (resource2) {
                    System.out.println("Поток 1: Заблокирован resource2");
                }
            }
        });

        Thread thread2 = new Thread(() -> {
            synchronized (resource2) {
                System.out.println("Поток 2: Заблокирован resource2");

                try { Thread.sleep(100); } 
                catch (InterruptedException e) {}

                synchronized (resource1) {
                    System.out.println("Поток 2: Заблокирован resource1");
                }
            }
        });

        thread1.start();
        thread2.start();
    }
}
```

**Что происходит:**
1. **Поток 1** захватывает `resource1` и пытается захватить `resource2`.
2. **Поток 2** захватывает `resource2` и пытается захватить `resource1`.
3. Оба потока бесконечно ждут друг друга, возникает взаимная блокировка.

**Результат выполнения:**
```
Поток 1: Заблокирован resource1
Поток 2: Заблокирован resource2
(программа зависает)
```

**Как избежать deadlock:**
1. Упорядочивание блокировок (всегда захватывать ресурсы в одном порядке).
2. Использование `tryLock()` с таймаутом.
3. Отказ от вложенных синхронизированных блоков.

**Исправленная версия с упорядочиванием блокировок:**
```java
// Оба потока теперь захватывают ресурсы в порядке: resource1 -> resource2
Thread thread2 = new Thread(() -> {
    synchronized (resource1) {  // Теперь начинает с resource1!
        System.out.println("Поток 2: Заблокирован resource1");

        try { Thread.sleep(100); } 
        catch (InterruptedException e) {}

        synchronized (resource2) {
            System.out.println("Поток 2: Заблокирован resource2");
        }
    }
});
```